spack:
  config:
    install_tree: /mnt/spack
    build_stage: /tmp/spack-stage
  repos:
  - /root/mochi-spack-packages
  packages:
    magma:
      variants: [+cuda cuda_arch=70]
    nccl:
      variants: [+cuda cuda_arch=70]
    py-horovod:
      variants: [+cuda cuda_arch=70 tensor_ops=nccl]
    py-torch:
      variants: [+cuda cuda_arch=70 +nccl +cudnn +magma +distributed]
  specs:
  - cuda@11.8
  - cudnn@8.4.0
  - openmpi@4.1.2
  - python
  - py-pip
  - py-ruamel-yaml
  - py-filelock
  - py-wandb@0.13.9
  - py-continuum
  - py-nvidia-dali
  - py-torch@1.13.1 ~gloo
  - py-torchvision
  - py-torchsummary
  - py-bokeh
  - py-matplotlib
  - py-horovod@0.26.1 controllers=mpi frameworks=pytorch
  - mochi-thallium@main ^argobots ^mercury@git.ae324b8 ~boostsys ~checksum +ofi +debug ^mochi.libfabric +cuda fabrics=tcp,rxm,verbs
  view: /mnt/view/gemini
