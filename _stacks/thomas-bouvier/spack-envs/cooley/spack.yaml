spack:
  config:
    upstreams:
    - /lus/theta-fs0/projects/VeloC/runderwood/spack/cooley
  repos:
  - /home/tbouvier/git/mochi-spack-packages
  packages:
    magma:
      variants: [+cuda cuda_arch=70]
    nccl:
      variants: [+cuda cuda_arch=70]
    py-horovod:
      variants: [+cuda cuda_arch=70 tensor_ops=nccl]
    py-torch:
      variants: [+cuda cuda_arch=70 +nccl +cudnn +magma +distributed]
  specs:
  - cuda@11.8
  - cudnn@8.4.0
  - openmpi@4.1.2
  - python
  - py-pip
  - py-ruamel-yaml
  - py-filelock
  - py-wandb@0.13.9
  - py-continuum
  - py-nvidia-dali@1.22.0-cuda110
  - py-torch@1.13.1 ~gloo
  - py-torchvision
  - py-torchsummary
  - py-bokeh
  - py-matplotlib
  - py-horovod@0.26.1 controllers=mpi frameworks=pytorch
  - mochi-thallium@main ^argobots ^mercury@git.ae324b8ac331e5d7fdcc061859b8f62a0bc87ccf ~boostsys ~checksum +ofi +debug ^mochi.libfabric +cuda fabrics=tcp,rxm,verbs
  view: /home/tbouvier/view/cooley
