spack:
  view: false
 
  concretizer:
    reuse: false
    unify: false

  compilers:
  - compiler:
      spec: oneapi@2022.2.0
      paths:
        cc: /soft/restricted/CNDA/sdk/2022.06.30.001/oneapi/compiler/pseudo-20220630/compiler/linux/bin/icx
        cxx: /soft/restricted/CNDA/sdk/2022.06.30.001/oneapi/compiler/pseudo-20220630/compiler/linux/bin/icpx
        f77: /soft/restricted/CNDA/sdk/2022.06.30.001/oneapi/compiler/pseudo-20220630/compiler/linux/bin/ifx
        fc: /soft/restricted/CNDA/sdk/2022.06.30.001/oneapi/compiler/pseudo-20220630/compiler/linux/bin/ifx
      flags: {}
      operating_system: opensuse_leap15
      target: x86_64
      modules:
      - oneapi/eng-compiler/2022.06.30.006
      - spack/linux-opensuse_leap15-x86_64
      - libnl/3.3.0-gcc-10.2.0-h7m7thf
      - rdma-core/36.3-gcc-10.2.0-l2rnrjy
      - libfabric/1.14.0-gcc-10.2.0-hp2bsva
      - libpciaccess/0.16-gcc-10.2.0-kluhisj
      - hwloc/master-gcc-10.2.0-fbu4tbk
      - intel_compute_runtime/release/pvc-prq-29
      environment:
        prepend_path:
          LD_LIBRARY_PATH: /soft/restricted/CNDA/sdk/2022.06.30.001/oneapi/compiler/pseudo-20220630/compiler/linux/compiler/lib/intel64_lin/:/soft/restricted/CNDA/sdk/2022.06.30.001/oneapi/compiler/pseudo-20220630/compiler/linux/lib:/soft/packaging/spack-builds/linux-opensuse_leap15-x86_64/gcc-10.2.0/libfabric-1.14.0-hp2bsvalxnpwh364mev25uz7ctjnyg6r/lib
      extra_rpaths:
      - /soft/packaging/spack-builds/linux-opensuse_leap15-x86_64/gcc-10.2.0/libfabric-1.14.0-hp2bsvalxnpwh364mev25uz7ctjnyg6r/lib
  - compiler:
      spec: gcc@11.1.0
      paths:
        cc: /soft/compilers/gcc/11.1.0/x86_64-suse-linux/bin/gcc
        cxx: /soft/compilers/gcc/11.1.0/x86_64-suse-linux/bin/g++
        f77: /soft/compilers/gcc/11.1.0/x86_64-suse-linux/bin/gfortran
        fc: /soft/compilers/gcc/11.1.0/x86_64-suse-linux/bin/gfortran
      flags: {}
      operating_system: opensuse_leap15
      target: x86_64
      modules: []
      environment: {}
      extra_rpaths: []

  packages:
    adios2:
      require: '%gcc'
    all:
      require: '%oneapi'
      providers:
        blas: [openblas]
        mpi: [mpich]
      target: [icelake]
      variants: +mpi
    py-cryptography:
      require: '@38.0.1'
    m4:
      require: '%gcc'
    autoconf:
      require: '%gcc'
    unzip:
      require: '%gcc'
    binutils:
      require: '%gcc'
      variants: +ld +gold +headers +libiberty ~nls
    elfutils:
      variants: +bzip2 ~nls +xz
    hdf5:
      variants: +fortran +hl +shared
    libunwind:
      variants: +pic +xz
    llvm:
      require: '%gcc'
    ncurses:
      variants: +termlib
    openblas:
      variants: threads=openmp
    python:
      require: '@3.7.15'
    ruby:
      require: '%gcc'
    rust:
      require: '%gcc'
    trilinos:
      variants: +amesos +amesos2 +anasazi +aztec +belos +boost +epetra +epetraext
        +ifpack +ifpack2 +intrepid +intrepid2 +isorropia +kokkos +ml +minitensor +muelu
        +nox +piro +phalanx +rol +rythmos +sacado +stk +shards +shylu +stokhos +stratimikos
        +teko +tempus +tpetra +trilinoscouplings +zoltan +zoltan2 +superlu-dist gotype=long_long
    vtk-m:
      require: ~openmp
    xz:
      variants: +pic
    mesa:
      version: [21.3.8]

    # EXTERNALS
    libfabric:
      buildable: false
      externals:
      - spec: libfabric@1.14.0 fabrics=psm3,rxm,shm,sockets,tcp,udp,verbs ~kdreg ~debug
        prefix: /soft/packaging/spack-builds/linux-opensuse_leap15-x86_64/gcc-10.2.0/libfabric-1.14.0-hp2bsvalxnpwh364mev25uz7ctjnyg6r
        modules:
        - spack/linux-opensuse_leap15-x86_64
        - libfabric/1.14.0-gcc-10.2.0-hp2bsva
    mpich:
      buildable: false
      externals:
      - spec: mpich@4.1a1~hydra device=ch4
        prefix: /soft/restricted/CNDA/mpich/drop49.1/mpich-ofi-sockets-icc-default-gpu-drop49
        modules:
        - oneapi/eng-compiler/2022.06.30.006
        - mpi/aurora_mpich/icc-sockets/49.1
        - spack/linux-opensuse_leap15-x86_64
        - libfabric/1.14.0-gcc-10.2.0-hp2bsva

  specs:
  # CPU ERRORS
  - adios2                                    # adios2
  - amrex                                     # amrex
  - axom                                      # raja
  - charliecloud                              # charliecloud
  - dyninst                                   # old intel-tbb
  - exaworks                                  # krb5
  - geopm                                     # geopm
  - gptune                                    # py-scipy
  - h5bench                                   # h5bench
  - hpctoolkit                                # dyninst
  - hpx networking=mpi                        # krb5
  - nrm                                       # nrm
  - omega-h                                   # trilinos@12.18.1
  - openmpi                                   # krb5
  - openpmd-api                               # adios2
  - paraview +qt                              # qt
  - parsec ~cuda                              # parsec
  - phist                                     # phist
  - pruners-ninja                             # pruners-ninja
  - py-cinemasci                              # py-scipy
  - py-jupyterhub                             # krb5
  - py-warpx ^warpx dims=2                    # py-scipy
  - py-warpx ^warpx dims=3                    # py-scipy
  - py-warpx ^warpx dims=rz                   # py-scipy
  - raja                                      # raja
  - rempi                                     # rempi
  - scr                                       # libyogrt
  - swig@4.0.2-fortran                        # swig
  - tau +mpi +python                          # pdt
  - variorum                                  # variorum

  # GPU ERRORS
  - amrex +sycl                                                 # amrex
  - arborx +sycl ^kokkos +sycl +openmp std=17 +tests +examples  # arborx
  - ginkgo +oneapi                                              # ginkgo
  - hpctoolkit +level_zero                                      # dyninst
  - sundials +sycl cxxstd=17                                    # sundials
  - tau +mpi +opencl +level_zero ~pdt                           # tau
